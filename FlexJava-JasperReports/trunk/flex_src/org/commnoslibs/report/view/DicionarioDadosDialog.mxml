<?xml version="1.0" encoding="utf-8"?>
<mx:TitleWindow layout="vertical"
				close="titlewindow1_closeHandler(event)"
				showCloseButton="true"
				title="Dicionário de dados"
				xmlns:mvfor="http://mvfor.mv.com.br/2010/flex"
				xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:s="library://ns.adobe.com/flex/spark">

	<mx:Script>
		<![CDATA[
			import flash.net.navigateToURL;

			import mx.events.CloseEvent;
			import mx.managers.PopUpManager;

			//------------------------------------------------------------------------------
			//
			//   Attributos 
			//
			//------------------------------------------------------------------------------

			//--------------------------------------
			//   Property 
			//--------------------------------------

			[Bindable]
			[Inject(source="reportManager.contextRoot")]
			public var contextRoot:String;

			[Bindable]
			[Inject(source="reportManager.applicationList")]
			public var applicationList:Array;

			[Bindable]
			[Inject(source="reportManager.userId")]
			public var userId:int;

			//------------------------------------------------------------------------------
			//
			//   Metodos 
			//
			//------------------------------------------------------------------------------

			//--------------------------------------
			//   Function 
			//--------------------------------------

			protected function btnEnviar_clickHandler(event:MouseEvent):void
			{
				var variables:URLVariables = new URLVariables();
				variables.time = new Date().time;
				variables["report"] = "dicionarioDados/dicionario_de_dados.jasper";
				variables["pNomeTabela"] = txTabela.text;
				variables["pAplicacao"] = cbAplicacao.selectedItem.data;
				variables["pOwner"] = cbAplicacao.selectedItem.owner;
				variables["userId"] = userId;

				var request:URLRequest = new URLRequest(contextRoot + "/relatorios/dicionario_de_dados");
				request.data = variables;
				request.method = URLRequestMethod.POST;

				navigateToURL(request,"_blank");
				PopUpManager.removePopUp(this);
			}

			protected function titlewindow1_closeHandler(event:CloseEvent):void
			{
				PopUpManager.removePopUp(this);
			}
		]]>
	</mx:Script>

	<mx:Form width="100%" height="100%">
		<mx:FormItem label="Nome da tabela">
			<s:TextInput id="txTabela" width="250"/>
		</mx:FormItem>
		<mx:FormItem label="Selecione a aplicação">
			<mx:ComboBox id="cbAplicacao" width="250" dataProvider="{applicationList}"/>
		</mx:FormItem>
	</mx:Form>

	<mx:ControlBar>
		<s:Button id="btnEnviar"
				  label="Enviar"
				  click="btnEnviar_clickHandler(event)"/>
	</mx:ControlBar>

</mx:TitleWindow>
