<?xml version="1.0" encoding="utf-8"?>
<s:NavigatorContent xmlns:fx="http://ns.adobe.com/mxml/2009"
					xmlns:mx="library://ns.adobe.com/flex/mx"
					xmlns:s="library://ns.adobe.com/flex/spark" width="100%" height="100%"
				>

	<s:layout>
		<s:VerticalLayout/>
	</s:layout>

	<fx:Metadata>
			[Inject(source="corManager.lista",destination="dg.dataProvider", bind="true")]
	</fx:Metadata>

	<fx:Script>
		<![CDATA[
			import com.app.events.CorEvent;
			import com.app.model.Cor;
			
			import mx.collections.ArrayCollection;
			import mx.events.FlexEvent;
			
			[Bindable]
			public var cor:Cor = new Cor();
			
			protected function btnBuscar_clickHandler(event:MouseEvent):void
			{
				var corEvent:CorEvent = new CorEvent(CorEvent.FIND_ALL);
				corEvent.cor = cor;
				corEvent.properties = ["descricao"];
				dispatchEvent(corEvent);
			}
			
			protected function btnNovo_clickHandler(event:MouseEvent):void
			{
				var corEvent:CorEvent = new CorEvent(CorEvent.EDIT);
				corEvent.cor = new Cor();
				dispatchEvent(corEvent);
			}
			
			protected function btnEditar_clickHandler(event:MouseEvent):void
			{
				var corEvent:CorEvent = new CorEvent(CorEvent.EDIT);
				dispatchEvent(corEvent);
			}
			
			protected function btnExcluir_clickHandler(event:MouseEvent):void
			{
				var corEvent:CorEvent = new CorEvent(CorEvent.REMOVE);
				dispatchEvent(corEvent);
			}
			
		]]>
	</fx:Script>

	<s:Form width="100%" skinClass="spark.skins.spark.StackedFormSkin">
		<s:layout>
			<s:HorizontalLayout gap="0"/>
		</s:layout>
		<s:FormItem label="Cor">
			<s:TextInput id="txFiltro" width="400" text="@{cor.descricao}"/>
		</s:FormItem>
		<s:FormItem label="Abreviação">
			<s:TextInput id="txAbreviacao" width="40" text="@{cor.abreviacao}"/>
		</s:FormItem>
		<s:FormItem>
			<s:Button id="btnBuscar" label="Buscar" buttonMode="true" click="btnBuscar_clickHandler(event)"/>
		</s:FormItem>
	</s:Form>

	<mx:DataGrid id="dg" width="100%" height="100%" 
				 doubleClick="btnEditar_clickHandler(event)" doubleClickEnabled="true">
		<mx:columns>
			<mx:DataGridColumn headerText='id' dataField='id' width="30"/>
			<mx:DataGridColumn headerText='Descrição' dataField='descricao'/>
			<mx:DataGridColumn headerText='Abreviação' dataField='abreviacao'/>
			<mx:DataGridColumn headerText='Ativo' dataField='ativo' width="30"/>
		</mx:columns>
	</mx:DataGrid>

	<s:HGroup verticalAlign="middle">
		<s:Button id="btnNovo" buttonMode="true" label="Novo" toolTip="Crtl + N" click="btnNovo_clickHandler(event)"/>
		<s:Button id="btnEditar" buttonMode="true" label="Editar" toolTip="Crtl + E" click="btnEditar_clickHandler(event)"/>
		<mx:LinkButton id="btnExcluir" buttonMode="true" label="Remover" click="btnExcluir_clickHandler(event)"/>
	</s:HGroup>

</s:NavigatorContent>
