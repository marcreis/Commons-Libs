<?xml version="1.0" encoding="utf-8"?>
<s:NavigatorContent xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" xmlns:ns="http://www.commonslibs.org/flex/cl">
	<s:layout>
		<s:VerticalLayout/>
	</s:layout>
	
	<fx:Script>
		<![CDATA[
			import com.app.events.FamiliaEvent;
			import com.app.model.Familia;
			
			[Bindable]
			[Inject(source="familiaManager.item",bind=true)]
			public var familia:Familia = new Familia();
			
			protected function btnSalvar_clickHandler(event:MouseEvent):void
			{
				var familiaEvent:FamiliaEvent = new FamiliaEvent(FamiliaEvent.SAVE);
				familiaEvent.familia = familia;
				familiaEvent.validators = validators;
				dispatchEvent(familiaEvent);
			}

			protected function btnCancelar_clickHandler(event:MouseEvent):void
			{
				dispatchEvent(new FamiliaEvent(FamiliaEvent.CANCEL));
			}
			
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<fx:Array id="validators">
			<mx:Validator source="{nome}" property="text"
						  triggerEvent="" required="true" 
						  requiredFieldError="Campo Obrigatório"/>
		</fx:Array>
	</fx:Declarations>

	<s:Form width="100%">
		<s:FormItem label="Descrição">
			<s:TextInput id="nome" text="@{familia.nome}"/>
		</s:FormItem>
	</s:Form>
	
	<s:DataGrid id="grid" width="100%" height="100%" dataProvider="{familia.items}"
				 editable="true">
		<s:columns>
			<s:ArrayList>
				<s:GridColumn dataField="nome" headerText="Item"/>
			</s:ArrayList>
		</s:columns>
	</s:DataGrid>
	
	<s:HGroup>
		<s:Button id="btnSalvar" label="Salvar" buttonMode="true" click="btnSalvar_clickHandler(event)"/>
		<mx:LinkButton id="btnCancelar" label="Cancelar" buttonMode="true" click="btnCancelar_clickHandler(event)"/>
	</s:HGroup>
	
</s:NavigatorContent>
